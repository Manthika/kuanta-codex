---
/* 3-card section; uses your images and typography */
import { getTranslations, resolveLocale } from "../../i18n";

const locale = resolveLocale(Astro.currentLocale);
const translations = getTranslations(locale);
const cards = translations.home.cards;
const heroTagline = translations.home.hero.subTagline;
---
<section class="cards-section" aria-labelledby="cards-title">
  <div class="container">
    <h2 id="cards-title" class="cards-title">{heroTagline}</h2>
  </div>

  <div class="container">
    <div class="cards-viewport">
      <div class="cards-track">
        <!-- PMR -->
        <article class="card">
          <img class="card__img" src="/images/home/pmr.jpg" alt="PMR preview" />
          <div class="card__body">
            <h3 class="card__title">{cards.pmr.title}</h3>
            <p class="card__desc">{cards.pmr.description}</p>
            <a class="card__more" href="#">{cards.pmr.cta} →</a>
          </div>
        </article>

        <!-- KAS -->
        <article class="card">
          <img class="card__img" src="/images/home/kas.jpg" alt="KAS preview" />
          <div class="card__body">
            <h3 class="card__title">{cards.kas.title}</h3>
            <p class="card__desc">{cards.kas.description}</p>
            <a class="card__more" href="#">{cards.kas.cta} →</a>
          </div>
        </article>

        <!-- BROKER -->
        <article class="card">
          <img class="card__img" src="/images/home/broker.jpg" alt="Broker preview" />
          <div class="card__body">
            <h3 class="card__title">{cards.broker.title}</h3>
            <p class="card__desc">{cards.broker.description}</p>
            <a class="card__more" href="#">{cards.broker.cta} →</a>
          </div>
        </article>
      </div>
    </div>
  </div>
</section>

<style>
  .cards-section{ padding: clamp(28px, 6vw, 80px) 0; background:#FDFDFF; }

/* Mobile-first, safe container */
.container{
  /* change this if you want a different cap */
  --container-max: 1200px;

  box-sizing: border-box;
  width: 100%;
  max-width: var(--container-max);
  margin-inline: auto;
  /* responsive gutters without media queries */
  padding-inline: clamp(16px, 4vw, 50px);
}

/* (Optional) tweak gutters at larger breakpoints if you want */
@media (min-width: 768px){
  .container{ padding-inline: clamp(24px, 4vw, 50px); }
}
@media (min-width: 1024px){
  .container{ padding-inline: clamp(32px, 3vw, 50px); }
}


  /* Heading (your spec) */
  .cards-title{
    margin: 0 0 clamp(18px,4vw,36px);
    text-align: center;
    font-family: "VITRO CORE"
    font-size: clamp(18px,3.4vw,28px);
    font-weight: 900;
    line-height: 175%;
    letter-spacing: -0.56px;
    background: linear-gradient(90deg, #4A3BFF 0%, #000C4A 100%);
    -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
  }
  

  /* Layout
     - Mobile: vertical stack
     - Tablet: horizontal scroll with ~2.5 cards
     - Desktop: 3 columns, no scroll */
  .cards-viewport{ overflow: visible; }
  .cards-track{
    --gap: 16px;
    display: flex;
    flex-direction: column;   /* mobile default */
    gap: var(--gap);
  }

  @media (min-width: 768px) and (max-width: 1023.98px){
    .cards-viewport{
      overflow-x: auto;
      overscroll-behavior-x: contain;
      -webkit-overflow-scrolling: touch;
      scroll-snap-type: x mandatory;
      padding-bottom: 8px;
    }
    .cards-track{
      flex-direction: row;
      --peek: 20%;                   /* next-card peek size */
      gap: var(--gap);
    }
    .card{
      flex: 0 0 calc((100% - var(--gap) - var(--peek)) / 2); /* ~2.5 visible */
      scroll-snap-align: start;
    }
    
  }

  @media (min-width: 1024px){
    .cards-viewport{ overflow: visible; }
    .cards-track{
      flex-direction: row;
      --gap: 22px;
      gap: var(--gap);
    }
    .card{
      flex: 0 0 calc((100% - 2 * var(--gap)) / 3);           /* 3 equal columns */
    }
  }

  /* Card visuals + type */
  .card{
    background:#fff;
    border-radius:16px;
    box-shadow:0 10px 24px rgba(0,0,0,.08);
    overflow:hidden;
    display:flex; flex-direction:column;
  }
  .card__img{ width:100%; height:200px; object-fit:cover; display:block; }
  @media (min-width:768px){ .card__img{ height:220px; } }
  @media (min-width:1024px){ .card__img{ height:240px; } }

  .card__body{ padding:14px 16px 16px; }

  .card__title{
    margin:0 0 6px;
    color:#000C4A;
    font-family: "Vitro Core", system-ui, sans-serif;
    font-size: clamp(18px,2.4vw,24px);
    font-style: italic; font-weight:900; line-height:145%;
    letter-spacing:-0.48px;
  }
  .card__desc{
    margin:0 0 10px;
    color:#646471;
    font-family:"Vitro Core", system-ui, sans-serif;
    font-size: clamp(13px,2vw,14px);
    font-weight:900; line-height:150%; letter-spacing:-0.14px;
  }
  .card__more{
    color:#000C4A;
    font-family: "Vitro Core", system-ui, sans-serif;
    font-size: clamp(15px,2.2vw,18px);
    font-style: italic; font-weight:700; line-height:145%;
    letter-spacing:-0.09px; text-decoration:none; display:inline-block;
  }
  .card__more:hover{ text-decoration: underline; }

  /* Optional thinner scrollbar on tablet */
  @media (min-width:768px) and (max-width:1023.98px){
    .cards-viewport::-webkit-scrollbar{ height:8px; }
    .cards-viewport::-webkit-scrollbar-thumb{ background:rgba(0,0,0,.2); border-radius:999px; }
    .cards-viewport{ scrollbar-width:thin; scrollbar-color:rgba(0,0,0,.25) transparent; }
  }
</style>
